<!DOCTYPE html>
<html lang="gu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Divinity AI</title>

<style>
body {
  margin:0;
  font-family: system-ui, sans-serif;
  background:#0f0f0f;
  color:#ffffff;
  padding:16px;
}
h2 { margin-top:0; }
textarea, select, button {
  width:100%;
  margin:6px 0;
  padding:10px;
  font-size:16px;
  border-radius:6px;
  border:none;
}
textarea { min-height:90px; }
button {
  background:#4CAF50;
  color:#fff;
  font-weight:bold;
}
.response {
  background:#1e1e1e;
  margin-top:12px;
  padding:12px;
  border-radius:8px;
}
.category {
  color:#4CAF50;
  font-weight:bold;
  margin-bottom:6px;
}
</style>
</head>

<body>

<h2>Divinity AI</h2>

<!-- Model selection -->
<select id="model">
  <option value="groq-70b">Groq 70B</option>
  <option value="gemini-2.5-flash">Gemini 2.5 Flash</option>
</select>

<!-- User input -->
<textarea id="input" placeholder="Divinity ને પૂછો..."></textarea>

<button onclick="askDivinity()">Ask</button>

<div id="output"></div>

<script>
/* ================= CONFIG ================= */
const API_KEY = "YOUR_GROW_API_KEY";   // <-- અહીં તમારી Grow API key મૂકો
const API_URL = "https://api.grow.com/v1/responses";
/* ========================================= */

/* Smart Lens category detection */
function detectCategory(text) {
  if (/[\u0A80-\u0AFF]/.test(text)) return "શિલાલેખ ભાષાંતર";
  if (/\d/.test(text)) return "Maths";
  if (/physics|chemistry|biology/i.test(text)) return "Science";
  if (/history|ancient|medieval/i.test(text)) return "History";
  if (/grammar|language/i.test(text)) return "Language / Grammar";
  return "General";
}

/* Ask Divinity (single-response mode) */
async function askDivinity() {
  const q = input.value.trim();
  if (!q) return;

  output.innerHTML = "Thinking…";

  const category = detectCategory(q);
  const model = document.getElementById("model").value;

  try {
    const res = await fetch(API_URL, {
      method: "POST",
      headers: {
        "Content-Type": "application/json",
        "Authorization": "Bearer " + API_KEY
      },
      body: JSON.stringify({
        model: model,
        prompt: q,
        max_output_tokens: 512,
        temperature: 0.7
        // streaming OFF → talking mode બંધ
      })
    });

    if (!res.ok) {
      throw new Error(await res.text());
    }

    const data = await res.json();
    const reply = data.output?.[0]?.content || "No response";

    output.innerHTML = `
      <div class="response">
        <div class="category">${category}</div>
        <div>${reply}</div>
      </div>
    `;

  } catch (e) {
    output.innerHTML = `
      <div class="response">
        Error: Response મળ્યો નથી
      </div>
    `;
    console.error(e);
  }
}
</script>

</body>
</html>
