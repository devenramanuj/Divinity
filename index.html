<!DOCTYPE html>
<html lang="gu">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Divinity App</title>
<style>
body{margin:0;font-family:system-ui;background:#0f0f0f;color:#fff}
header{padding:12px;text-align:center;background:#1c1c1c;font-size:20px}
select,textarea,button{width:100%;margin:6px 0;padding:10px;font-size:16px;border-radius:6px;border:none}
button{background:#4CAF50;color:#000;font-weight:bold}
.card{background:#1e1e1e;padding:10px;border-radius:8px;margin-top:10px}
.badge{background:#4CAF50;color:#000;padding:4px 8px;border-radius:6px;font-size:12px}
</style>
</head>

<body>

<header>Divinity – Smart Lens + AI</header>

<select id="model">
  <option value="groq">Groq 70B</option>
  <option value="gemini">Gemini 2.5 Flash</option>
</select>

<textarea id="input" placeholder="Smart Lens text / question..."></textarea>
<button onclick="askAI()">Analyze</button>

<div id="output"></div>

<script>
/* ================== API SETTINGS ================== */
const CONFIG = {
  GROW_API_KEY: "PASTE_YOUR_GROW_API_KEY_HERE",
  ENDPOINT: "https://api.grow.com/v1/responses",
  MODELS: {
    groq: "groq-70b",
    gemini: "gemini-2.5-flash"
  }
};
/* ================================================== */

/* ---------- SMART LENS ---------- */
function detectCategory(text){
  if(/[\u0A80-\u0AFF]/.test(text)) return "શિલાલેખ / Gujarati";
  if(/\d+[\+\-\*\/]\d+/.test(text)) return "Maths";
  if(/history|ancient|king/i.test(text)) return "History";
  return "General";
}

/* ---------- AI CALL ---------- */
async function askAI(){
  const q = input.value.trim();
  if(!q) return;

  const cat = detectCategory(q);
  const modelKey = model.value;
  const modelName = CONFIG.MODELS[modelKey];

  output.innerHTML = "Thinking…";

  try{
    const res = await fetch(CONFIG.ENDPOINT,{
      method:"POST",
      headers:{
        "Content-Type":"application/json",
        "Authorization":"Bearer "+CONFIG.GROW_API_KEY
      },
      body:JSON.stringify({
        model: modelName,
        prompt: q,
        max_output_tokens: 512,
        temperature: 0.6
      })
    });

    if(!res.ok) throw new Error("API error");

    const data = await res.json();
    const reply = data.output?.[0]?.content || "No response";

    output.innerHTML = `
      <div class="card">
        <div class="badge">${cat}</div>
        <p>${reply}</p>
      </div>
    `;

  }catch(e){
    output.innerHTML = `<div class="card">Response મળ્યો નથી</div>`;
  }
}
</script>

</body>
</html>
